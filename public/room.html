<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();
const roomId = location.pathname.split("/")[2];
const params = new URLSearchParams(location.search);
const code = params.get("code");

if (!code) {
    alert("Verification code required");
    location.href = "/";
}

socket.emit("verifyAndJoin", { roomId, code });

socket.on("verificationSuccess", () => {
    console.log("Verified and joined room");
});

socket.on("verificationFailed", msg => {
    alert(msg);
    location.href = "/";
});
</script>

<script src="/game.js"></script>
